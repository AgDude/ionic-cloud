!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../core/request"),a=e("../core/promise"),s=e("../core/core"),u=e("../core/logger"),c=e("./storage"),l=e("../core/user"),f=e("../util/util"),h=null,p="DEFER_REGISTER",d={},g={},v=[],y=function(){function e(t){r(this,e),this._dispatcher=null,this._dispatchIntervalTime=30,this._useEventCaching=!0,this._serviceHost=s.IonicPlatform.config.getURL("analytics"),this.logger=new u.Logger({prefix:"Ionic Analytics:"}),this.storage=s.IonicPlatform.getStorage(),this.cache=new c.BucketStorage("ionic_analytics"),this._addGlobalPropertyDefaults(),t!==p&&this.register(t)}return i(e,[{key:"_addGlobalPropertyDefaults",value:function(){var e=this;e.setGlobalProperties(function(e,t){t._user=JSON.parse(JSON.stringify(l.User.current())),t._app={app_id:s.IonicPlatform.config.get("app_id"),analytics_version:s.IonicPlatform.Version}})}},{key:"_enqueueEvent",value:function(e,t){var n=this;if(d.dryRun)return n.logger.info("event recieved but not sent (dryRun active):"),n.logger.info(e),void n.logger.info(t);n.logger.info("enqueuing event to send later:"),n.logger.info(e),n.logger.info(t),t.keen||(t.keen={}),t.keen.timestamp=(new Date).toISOString();var r=n.cache.get("event_queue")||{};r[e]||(r[e]=[]),r[e].push(t),n.cache.set("event_queue",r)}},{key:"_requestAnalyticsKey",value:function(){var e={method:"GET",json:!0,uri:s.IonicPlatform.config.getURL("api")+"/api/v1/app/"+s.IonicPlatform.config.get("app_id")+"/keys/write",headers:{Authorization:"basic "+btoa(s.IonicPlatform.config.get("app_id")+":"+s.IonicPlatform.config.get("api_key"))}};return new o.APIRequest(e)}},{key:"_postEvent",value:function(e,t){var n=this,r={name:[t]};h||n.logger.error("Cannot send events to the analytics server without an Analytics key.");var i={method:"POST",url:n._serviceHost+"/api/v1/events/"+s.IonicPlatform.config.get("app_id"),json:r,headers:{Authorization:h}};return new o.APIRequest(i)}},{key:"_postEvents",value:function(e){var t=this;h||t.logger.info("Cannot send events to the analytics server without an Analytics key.");var n={method:"POST",url:t._serviceHost+"/api/v1/events/"+s.IonicPlatform.config.get("app_id"),json:e,headers:{Authorization:h}};return new o.APIRequest(n)}},{key:"_dispatchQueue",value:function(){var e=this,t=this.cache.get("event_queue")||{};0!==Object.keys(t).length&&s.IonicPlatform.deviceConnectedToNetwork()&&e.storage.lockedAsyncCall(e.cache.scopedKey("event_dispatch"),function(){return e._postEvents(t)}).then(function(){e.cache.set("event_queue",{}),e.logger.info("sent events"),e.logger.info(t)},function(n){e._handleDispatchError(n,this,t)})}},{key:"_getRequestStatusCode",value:function(e){var t=null;return e&&e.requestInfo._lastResult&&e.requestInfo._lastResult.status&&(t=e.requestInfo._lastResult.status),t}},{key:"_handleDispatchError",value:function(e,t,n){var r=this,i=this._getRequestStatusCode(t);"last_call_interrupted"===e?r.cache.set("event_queue",{}):i?(r.cache.set("event_queue",{}),r.logger.error("Error sending analytics data: Server responded with error"),r.logger.error(n)):r.logger.error("Error sending analytics data: Failed to connect to analytics server.")}},{key:"_handleRegisterError",value:function(e,t){var n=this,r=this._getRequestStatusCode(t),i=" See http://docs.ionic.io/v1.0/docs/io-quick-start";switch(r){case 401:n.logger.error("The api key and app id you provided did not register on the server. "+i);break;case 404:n.logger.error('The app id you provided ("'+s.IonicPlatform.config.get("app_id")+'") was not found.'+i);break;default:n.logger.error("Unable to request analytics key."),n.logger.error(e)}}},{key:"register",value:function(e){var t=this,n=new a.DeferredPromise;return this.hasValidSettings?(d=e||{},d.silent?this.logger.silence():this.logger.verbose(),d.dryRun&&this.logger.info("dryRun mode is active. Analytics will not send any events."),this._requestAnalyticsKey().then(function(e){h=e.payload.write_key,t.logger.info("successfully registered analytics key"),t.dispatchInterval=t.dispatchInterval,n.resolve(!0)},function(e){t._handleRegisterError(e,this),n.reject(!1)}),n.promise):(n.reject(!1),n.promise)}},{key:"setGlobalProperties",value:function(e){var t=this,n=typeof e;switch(n){case"object":for(var r in e)e.hasOwnProperty(r)&&(g[r]=e[r]);break;case"function":v.push(e);break;default:t.logger.error("setGlobalProperties parameter must be an object or function.")}}},{key:"track",value:function(e,t){var n=this;if(!this.hasValidSettings)return!1;t=t?f.deepExtend({},t):{};for(var r in g)g.hasOwnProperty(r)&&void 0===t[r]&&(t[r]=g[r]);for(var i=0;i<v.length;i++){var o=v[i];o.call(null,e,t)}this._useEventCaching?n._enqueueEvent(e,t):d.dryRun?(n.logger.info("dryRun active, will not send event"),n.logger.info(e),n.logger.info(t)):n._postEvent(e,t)}},{key:"unsetGlobalProperty",value:function(e){var t=this,n=typeof e;switch(n){case"string":delete g[e];break;case"function":var r=v.indexOf(e);-1===r&&t.logger.error("The function passed to unsetGlobalProperty was not a global property."),v.splice(r,1);break;default:t.logger.error("unsetGlobalProperty parameter must be a string or function.")}}},{key:"hasValidSettings",get:function(){if(!s.IonicPlatform.config.get("app_id")||!s.IonicPlatform.config.get("api_key")){var e="A valid app_id and api_key are required before you can utilize analytics properly. See http://docs.ionic.io/v1.0/docs/io-quick-start";return this.logger.info(e),!1}return!0}},{key:"dispatchInterval",set:function(e){var t=this;this._dispatchIntervalTime=e,this._dispatcher&&window.clearInterval(this._dispatcher),e>0?(this._dispatcher=window.setInterval(function(){t._dispatchQueue()},1e3*e),this._useEventCaching=!0):this._useEventCaching=!1},get:function(){return this._dispatchIntervalTime}}]),e}();n.Analytics=y},{"../core/core":9,"../core/logger":13,"../core/promise":14,"../core/request":15,"../core/user":17,"../util/util":26,"./storage":4}],2:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function i(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./analytics");i(n,r(o,i));var a=e("./serializers");i(n,r(a,i));var s=e("./storage");i(n,r(s,i))},{"./analytics":1,"./serializers":3,"./storage":4}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"elementSelector",value:function(e){for(var t=[];"HTML"!==e.tagName;){var n=e.tagName.toLowerCase(),r=e.getAttribute("id");r&&(n+="#"+r);var i=e.className;if(i)for(var o=i.split(" "),a=0;a<o.length;a++){var s=o[a];s&&(n+="."+s)}if(!e.parentNode)return null;var u=Array.prototype.indexOf.call(e.parentNode.children,e);n+=":nth-child("+(u+1)+")",e=e.parentNode,t.push(n)}return t.reverse().join(">")}},{key:"elementName",value:function(e){var t=e.getAttribute("ion-track-name");if(t)return t;var n=e.getAttribute("id");return n?n:null}}]),e}();n.DOMSerializer=o},{}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../core/core"),a=function(){function e(t){r(this,e),this.name=t,this.baseStorage=o.IonicPlatform.getStorage()}return i(e,[{key:"get",value:function(e){return this.baseStorage.retrieveObject(this.scopedKey(e))}},{key:"set",value:function(e,t){return this.baseStorage.storeObject(this.scopedKey(e),t)}},{key:"scopedKey",value:function(e){return this.name+"_"+e+"_"+o.IonicPlatform.config.get("app_id")}}]),e}();n.BucketStorage=a},{"../core/core":9}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){g=t,"object"==typeof e&&e.remember?m.store():_.store()}function o(e){var t=[];try{t=e.response.body.error.details}catch(n){}return t}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../core/request"),u=e("../core/promise"),c=e("../core/core"),l=e("../core/storage"),f=e("../core/user"),h=new l.PlatformLocalStorageStrategy,p=new l.LocalSessionStorageStrategy,d={},g=null,v=c.IonicPlatform.config.getURL("platform-api")+"/auth",y={login:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return e?v+"/login/"+e:v+"/login"},signup:function(){return v+"/users"}},_=function(){function e(){r(this,e)}return a(e,null,[{key:"delete",value:function(){p.remove(e.label)}},{key:"store",value:function(){p.set(e.label,g)}},{key:"getRawData",value:function(){return p.get(e.label)||!1}},{key:"label",get:function(){return"ionic_io_auth_"+c.IonicPlatform.config.get("app_id")}}]),e}();n.TempTokenContext=_;var m=function(){function e(){r(this,e)}return a(e,null,[{key:"delete",value:function(){h.remove(e.label)}},{key:"store",value:function(){h.set(e.label,g)}},{key:"getRawData",value:function(){return h.get(e.label)||!1}},{key:"label",get:function(){return"ionic_io_auth_"+c.IonicPlatform.config.get("app_id")}}]),e}();n.TokenContext=m;var k=function S(e,t,n){r(this,S);var o=new u.DeferredPromise;return window&&window.cordova&&window.cordova.InAppBrowser?new s.APIRequest({uri:y.login(t.provider),method:t.uri_method||"POST",json:{app_id:c.IonicPlatform.config.get("app_id"),callback:t.callback_uri||window.location.href,data:n}}).then(function(t){var n=t.payload.data.url,r=window.cordova.InAppBrowser.open(n,"_blank","location=no,clearcache=yes,clearsessioncache=yes");r.addEventListener("loadstart",function(t){if("http://auth.ionic.io"===t.url.slice(0,20)){for(var n=t.url.split("#")[0].split("?")[1],a=n.split("&"),s={},u=0;u<a.length;u++){var c=a[u].split("=");s[c[0]]=c[1]}i(e,s.token),r.close(),r=null,o.resolve(!0)}})},function(e){o.reject(e)}):o.reject("Missing InAppBrowser plugin"),o.promise},b=function(){function e(){r(this,e)}return a(e,null,[{key:"isAuthenticated",value:function(){var e=m.getRawData(),t=_.getRawData();return t||e?!0:!1}},{key:"login",value:function(e,t,n){var r=new u.DeferredPromise,i=d[e]||!1;if(!i)throw new Error("Authentication class is invalid or missing:"+i);return i.authenticate.apply(i,[t,n]).then(function(){f.User.self().then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise}},{key:"signup",value:function(e){var t=d.basic||!1;if(!t)throw new Error("Authentication class is invalid or missing:"+t);return t.signup.apply(t,[e])}},{key:"logout",value:function(){m["delete"](),_["delete"]()}},{key:"register",value:function(e,t){d[e]||(d[e]=t)}},{key:"getUserToken",value:function(){var e=m.getRawData(),t=_.getRawData(),n=t||e;return n?n:!1}}]),e}();n.Auth=b;var w=function(){function e(){r(this,e)}return a(e,null,[{key:"authenticate",value:function(e,t){var n=new u.DeferredPromise;return new s.APIRequest({uri:y.login(),method:"POST",json:{app_id:c.IonicPlatform.config.get("app_id"),email:t.email,password:t.password}}).then(function(t){i(e,t.payload.data.token),n.resolve(!0)},function(e){n.reject(e)}),n.promise}},{key:"signup",value:function(e){var t=new u.DeferredPromise,n={app_id:c.IonicPlatform.config.get("app_id"),email:e.email,password:e.password};return e.username&&(n.username=e.username),e.image&&(n.image=e.image),e.name&&(n.name=e.name),e.custom&&(n.custom=e.custom),new s.APIRequest({uri:y.signup(),method:"POST",json:n}).then(function(){t.resolve(!0)},function(e){var n=[],r=o(e);if(r instanceof Array)for(var i=0;i<r.length;i++){var a=r[i];"object"==typeof a&&a.error_type&&n.push(a.error_type+"_"+a.parameter)}t.reject({errors:n})}),t.promise}}]),e}(),P=function(){function e(){r(this,e)}return a(e,null,[{key:"authenticate",value:function(e,t){return new k(e,{provider:"custom"},t)}}]),e}(),j=function(){function e(){r(this,e)}return a(e,null,[{key:"authenticate",value:function(e,t){return new k(e,{provider:"twitter"},t)}}]),e}(),I=function(){function e(){r(this,e)}return a(e,null,[{key:"authenticate",value:function(e,t){return new k(e,{provider:"facebook"},t)}}]),e}(),T=function(){function e(){r(this,e)}return a(e,null,[{key:"authenticate",value:function(e,t){return new k(e,{provider:"github"},t)}}]),e}(),O=function(){function e(){r(this,e)}return a(e,null,[{key:"authenticate",value:function(e,t){return new k(e,{provider:"google"},t)}}]),e}(),C=function(){function e(){r(this,e)}return a(e,null,[{key:"authenticate",value:function(e,t){return new k(e,{provider:"instagram"},t)}}]),e}(),E=function(){function e(){r(this,e)}return a(e,null,[{key:"authenticate",value:function(e,t){return new k(e,{provider:"linkedin"},t)}}]),e}();b.register("basic",w),b.register("custom",P),b.register("facebook",I),b.register("github",T),b.register("google",O),b.register("instagram",C),b.register("linkedin",E),b.register("twitter",j)},{"../core/core":9,"../core/promise":14,"../core/request":15,"../core/storage":16,"../core/user":17}],6:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function i(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./auth");i(n,r(o,i))},{"./auth":5}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return s[e]||null}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./logger"),s={},u=function(){function e(t,n){return r(this,e),this.logger=new a.Logger({prefix:"Ionic App:"}),t&&""!==t?n&&""!==n?(s.id=t,s.apiKey=n,this.devPush=null,void(this.gcmKey=null)):void this.logger.info("No api_key was provided"):void this.logger.info("No app_id was provided")}return o(e,[{key:"toString",value:function(){return"<IonicApp ['"+this.id+"'>"}},{key:"id",get:function(){return i("id")}},{key:"apiKey",get:function(){return i("apiKey")}}]),e}();n.App=u},{"./logger":13}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._settings={},this._devLocations={},this._locations={api:"https://apps.ionic.io",push:"https://push.ionic.io",analytics:"https://analytics.ionic.io",deploy:"https://apps.ionic.io","platform-api":"https://api.ionic.io"}}return i(e,[{key:"get",value:function(e){return this._settings[e]}},{key:"getURL",value:function(e){return this._devLocations[e]?this._devLocations[e]:this._locations[e]?this._locations[e]:null}},{key:"register",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this._settings=e,this._devLocations=e.dev_locations||{}}}]),e}();n.IonicPlatformConfig=o;var a=new o;n.Config=a},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./events"),a=e("./storage"),s=e("./logger"),u=e("./config"),c=new o.EventEmitter,l=new a.Storage,f=function(){function e(){r(this,e);var t=this;if(this.config=u.Config,this.logger=new s.Logger({prefix:"Ionic Core:"}),this.logger.info("init"),this._pluginsReady=!1,this.emitter=this.getEmitter(),this._bootstrap(),t.cordovaPlatformUnknown)t.logger.info("attempting to mock plugins"),t._pluginsReady=!0,t.emitter.emit("ionic_core:plugins_ready");else try{document.addEventListener("deviceready",function(){t.logger.info("plugins are ready"),t._pluginsReady=!0,t.emitter.emit("ionic_core:plugins_ready")},!1)}catch(n){t.logger.info("unable to listen for cordova plugins to be ready")}}return i(e,[{key:"init",value:function(e){this.config.register(e)}},{key:"getEmitter",value:function(){return c}},{key:"getStorage",value:function(){return l}},{key:"_isCordovaAvailable",value:function(){var e=this;if(this.logger.info("searching for cordova.js"),"undefined"!=typeof cordova)return this.logger.info("cordova.js has already been loaded"),!0;for(var t=document.getElementsByTagName("script"),n=t.length,r=0;n>r;r++){var i=t[r].getAttribute("src");if(i){var o=i.split("/"),a=0;try{if(a=o.length,"cordova.js"===o[a-1])return e.logger.info("cordova.js has previously been included."),!0}catch(s){e.logger.info("encountered error while testing for cordova.js presence, "+s.toString())}}}return!1}},{key:"loadCordova",value:function(){var e=this;if(!this._isCordovaAvailable()){var t=document.createElement("script"),n="cordova.js";switch(this.getDeviceTypeByNavigator()){case"android":"file"===window.location.href.substring(0,4)&&(n="file:///android_asset/www/cordova.js");break;case"ipad":case"iphone":try{var r=window.location.search.match(/cordova_js_bootstrap_resource=(.*?)(&|#|$)/i);r&&(n=decodeURI(r[1]))}catch(i){e.logger.info("could not find cordova_js_bootstrap_resource query param"),e.logger.info(i)}break;case"unknown":return e.cordovaPlatformUnknown=!0,!1}t.setAttribute("src",n),document.head.appendChild(t),e.logger.info("injecting cordova.js")}}},{key:"getDeviceTypeByNavigator",value:function(){var e=navigator.userAgent,t=e.match(/iPad/i);if(t&&"ipad"===t[0].toLowerCase())return"ipad";var n=e.match(/iPhone/i);if(n&&"iphone"===n[0].toLowerCase())return"iphone";var r=e.match(/Android/i);return r&&"android"===r[0].toLowerCase()?"android":"unknown"}},{key:"isAndroidDevice",value:function(){var e=this.getDeviceTypeByNavigator();return"android"===e?!0:!1}},{key:"isIOSDevice",value:function(){var e=this.getDeviceTypeByNavigator();return"iphone"===e||"ipad"===e?!0:!1}},{key:"_bootstrap",value:function(){this.loadCordova()}},{key:"deviceConnectedToNetwork",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];if("undefined"==typeof e&&(e=!1),"undefined"==typeof navigator.connection||"undefined"==typeof navigator.connection.type||"undefined"==typeof Connection)return e?!1:!0;switch(navigator.connection.type){case Connection.ETHERNET:case Connection.WIFI:case Connection.CELL_2G:case Connection.CELL_3G:case Connection.CELL_4G:case Connection.CELL:return!0;default:return!1}}},{key:"onReady",value:function(e){var t=this;this._pluginsReady?e(t):t.emitter.on("ionic_core:plugins_ready",function(){e(t)})}},{key:"Version",get:function(){return"0.7.1"}}]),e}();n.IonicPlatformCore=f;var h=new f;n.IonicPlatform=h},{"./config":8,"./events":11,"./logger":13,"./storage":16}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={},a=function(){function e(t){r(this,e),this.data={},this.setProperties(t)}return i(e,[{key:"setProperties",value:function(e){if(e instanceof Object)for(var t in e)this.data[t]=e[t]}},{key:"toJSON",value:function(){var e=this.data;return{__Ionic_DataTypeSchema:e.name,value:e.value}}},{key:"isValid",value:function(){return this.data.name&&this.data.value?!0:!1}}]),e}();n.DataTypeSchema=a;var s=function(){function e(){r(this,e)}return i(e,null,[{key:"get",value:function(e,t){return o[e]?new o[e](t):!1}},{key:"getMapping",value:function(){return o}},{key:"register",value:function(e,t){o[e]=t}},{key:"Schema",get:function(){return a}}]),e}();n.DataType=s;var u=function(){function e(t){if(r(this,e),this.data=[],t instanceof Array)for(var n in t)this.push(t[n])}return i(e,[{key:"toJSON",value:function(){var e=this.data,t=new a({name:"UniqueArray",value:e});return t.toJSON()}},{key:"push",value:function(e){-1===this.data.indexOf(e)&&this.data.push(e)}},{key:"pull",value:function(e){var t=this.data.indexOf(e);this.data.splice(t,1)}}],[{key:"fromStorage",value:function(t){return new e(t)}}]),e}();n.UniqueArray=u,s.register("UniqueArray",u)},{}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("events"),a=function(){function e(){r(this,e),this._emitter=new o.EventEmitter}return i(e,[{key:"on",value:function(e,t){return this._emitter.on(e,t)}},{key:"emit",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this._emitter.emit(e,t)}}]),e}();n.EventEmitter=a},{events:27}],12:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function i(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./app");i(n,r(o,i));var a=e("./core");i(n,r(a,i));var s=e("./data-types");i(n,r(s,i));var u=e("./events");i(n,r(u,i));var c=e("./logger");i(n,r(c,i));var l=e("./promise");i(n,r(l,i));var f=e("./request");i(n,r(f,i));var h=e("./config");i(n,r(h,i));var p=e("./storage");i(n,r(p,i));var d=e("./user");i(n,r(d,i))},{"./app":7,"./config":8,"./core":9,"./data-types":10,"./events":11,"./logger":13,"./promise":14,"./request":15,"./storage":16,"./user":17}],13:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e);var n=t||{};this._silence=!1,this._prefix=null,this._options=n,this._bootstrap()}return i(e,[{key:"silence",value:function(){this._silence=!0}},{key:"verbose",value:function(){this._silence=!1}},{key:"_bootstrap",value:function(){this._options.prefix&&(this._prefix=this._options.prefix)}},{key:"info",value:function(e){this._silence||(this._prefix?console.log(this._prefix,e):console.log(e))}},{key:"warn",value:function(e){this._silence||(this._prefix?console.log(this._prefix,e):console.log(e))}},{key:"error",value:function(e){this._prefix?console.error(this._prefix,e):console.error(e)}}]),e}();n.Logger=o},{}],14:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("es6-promise"),a=function(){function e(){r(this,e);var t=this;this._update=!1,this.promise=new o.Promise(function(e,n){t.resolve=e,t.reject=n});var n=this.promise.then;this.promise.then=function(e,r,i){return t._update=i,n.call(t.promise,e,r)}}return i(e,[{key:"notify",value:function(e){this._update&&"function"==typeof this._update&&this._update(e)}}]),e}();n.DeferredPromise=a},{"es6-promise":30}],15:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;s=c=u=void 0,r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0}},s=e("./promise"),u=e("../auth/auth"),c=e("superagent"),l=r(c),f=function g(){o(this,g)};n.Request=f;var h=function v(){o(this,v)};n.Response=h;var p=function(e){function t(){o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this)}return i(t,e),t}(h);n.APIResponse=p;var d=function(e){function t(e){if(o(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),e.headers=e.headers||{},!e.headers.Authorization){var n=u.Auth.getUserToken();n&&(e.headers.Authorization="Bearer "+n)}var r={},i=new s.DeferredPromise,c=(e.method||"get").toLowerCase(),f=l[c](e.uri||e.url);return e.json&&(f=f.send(e.json)),e.headers&&(f=f.set(e.headers)),f=f.end(function(e,t){if(r._lastError=e,r._lastResult=t,e)i.reject(e);else if(t.status<200||t.status>=400){var n=new Error("Request Failed with status code of "+t.status);i.reject({response:t,error:n})}else i.resolve({response:t,payload:t.body})}),i.requestInfo=r,i.promise}return i(t,e),t}(f);n.APIRequest=d},{"../auth/auth":5,"./promise":14,superagent:32}],16:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./promise"),a=function(){function e(){r(this,e)}return i(e,[{key:"get",value:function(e){return window.localStorage.getItem(e)}},{key:"remove",value:function(e){return window.localStorage.removeItem(e)}},{key:"set",value:function(e,t){return window.localStorage.setItem(e,t)}}]),e}();n.PlatformLocalStorageStrategy=a;var s=function(){function e(){r(this,e)}return i(e,[{key:"get",value:function(e){return window.sessionStorage.getItem(e)}},{key:"remove",value:function(e){return window.sessionStorage.removeItem(e)}},{key:"set",value:function(e,t){return window.sessionStorage.setItem(e,t)}}]),e}();n.LocalSessionStorageStrategy=s;var u={},c={},l=function(){function e(){r(this,e),this.strategy=new a}return i(e,[{key:"storeObject",value:function(e,t){var n=JSON.stringify(t);this.strategy.set(e,n),u[e]=t}},{key:"deleteObject",value:function(e){this.strategy.remove(e),delete u[e]}},{key:"retrieveObject",value:function(e){var t=u[e];if(t)return t;var n=this.strategy.get(e);if(null===n)return null;try{return JSON.parse(n)}catch(r){return null}}},{key:"lockedAsyncCall",value:function(e,t){var n=this,r=new o.DeferredPromise;return c[e]?(r.reject("in_progress"),r.promise):"locked"===this.strategy.get(e)?(r.reject("last_call_interrupted"),r.promise.then(null,function(){n.strategy.remove(e)}),r.promise):(c[e]=!0,n.strategy.set(e,"locked"),t().then(function(t){r.resolve(t),delete c[e],n.strategy.remove(e)},function(t){r.reject(t),delete c[e],n.strategy.remove(e)},function(e){r.notify(e)}),r.promise)}}]),e}();n.Storage=l},{"./promise":14}],17:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../auth/auth"),a=e("./request"),s=e("./promise"),u=e("./core"),c=e("./storage"),l=e("./logger"),f=e("./data-types"),h=null,p=new c.Storage,d=u.IonicPlatform.config.getURL("platform-api")+"/auth/users",g={self:function(){return d+"/self"},get:function(e){return d+"/"+e.id},remove:function(e){return d+"/"+e.id},save:function(e){return d+"/"+e.id},passwordReset:function(e){return d+"/"+e.id+"/password-reset"}},v=function(){function e(){r(this,e)}return i(e,null,[{key:"delete",value:function(){p.deleteObject(e.label)}},{key:"store",value:function(){e.getRawData()&&e.storeLegacyData(e.getRawData()),_.current().data.data.__ionic_user_migrated&&p.storeObject(e.label+"_legacy",{__ionic_user_migrated:!0}),p.storeObject(e.label,_.current())}},{key:"storeLegacyData",value:function(t){e.getRawLegacyData()||p.storeObject(e.label+"_legacy",t)}},{key:"getRawData",value:function(){return p.retrieveObject(e.label)||!1}},{key:"getRawLegacyData",value:function(){return p.retrieveObject(e.label+"_legacy")||!1}},{key:"load",value:function(){var t=p.retrieveObject(e.label)||!1;return t?(e.storeLegacyData(t),_.fromContext(t)):void 0}},{key:"label",get:function(){return"ionic_io_user_"+u.IonicPlatform.config.get("app_id")}}]),e}(),y=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),this.data={},"object"==typeof t&&(this.data=t,this.deserializerDataTypes())}return i(e,[{key:"deserializerDataTypes",value:function(){for(var e in this.data)if("object"==typeof this.data[e]&&this.data[e].__Ionic_DataTypeSchema){var t=this.data[e].__Ionic_DataTypeSchema,n=f.DataType.getMapping();n[t]&&(this.data[e]=n[t].fromStorage(this.data[e].value));
}}},{key:"set",value:function(e,t){this.data[e]=t}},{key:"unset",value:function(e){delete this.data[e]}},{key:"get",value:function(e,t){return this.data.hasOwnProperty(e)?this.data[e]:0===t||t===!1?t:t||null}}]),e}();n.UserData=y;var _=function(){function e(){r(this,e),this.logger=new l.Logger({prefix:"Ionic User:"}),this._blockLoad=!1,this._blockSave=!1,this._blockDelete=!1,this._dirty=!1,this._fresh=!0,this._unset={},this.data=new y}return i(e,[{key:"isDirty",value:function(){return this._dirty}},{key:"isAnonymous",value:function(){return this.id?!1:!0}},{key:"isAuthenticated",value:function(){return this===e.current()?o.Auth.isAuthenticated():!1}},{key:"isFresh",value:function(){return this._fresh}},{key:"isValid",value:function(){return this.id?!0:!1}},{key:"getAPIFormat",value:function(){var e={};for(var t in this.details)e[t]=this.details[t];return e.custom=this.data.data,e}},{key:"getFormat",value:function(e){var t=this,n=null;switch(e){case"api-save":n=t.getAPIFormat()}return n}},{key:"migrate",value:function(){var e=v.getRawLegacyData();if(e.__ionic_user_migrated)return!0;if(e){var t=Ionic.User.current(),n=new y(e.data.data);for(var r in n.data)t.set(r,n.data[r]);t.set("__ionic_user_migrated",!0)}}},{key:"delete",value:function(){var e=this,t=new s.DeferredPromise;return e.isValid()?(e._blockDelete?(e.logger.info("a delete operation is already in progress for "+this+"."),t.reject(!1)):(e._blockDelete=!0,e._delete(),new a.APIRequest({uri:g.remove(this),method:"DELETE",json:!0}).then(function(n){e._blockDelete=!1,e.logger.info("deleted "+e),t.resolve(n)},function(n){e._blockDelete=!1,e.logger.error(n),t.reject(n)})),t.promise):!1}},{key:"_store",value:function(){this===e.current()&&v.store()}},{key:"_delete",value:function(){this===e.current()&&v["delete"]()}},{key:"save",value:function(){var e=this,t=new s.DeferredPromise;return e._blockSave?(e.logger.info("a save operation is already in progress for "+this+"."),t.reject(!1)):(e._blockSave=!0,e._store(),new a.APIRequest({uri:g.save(this),method:"PATCH",json:e.getFormat("api-save")}).then(function(n){e._dirty=!1,e.isFresh()||(e._unset={}),e._fresh=!1,e._blockSave=!1,e.logger.info("saved user"),t.resolve(n)},function(n){e._dirty=!0,e._blockSave=!1,e.logger.error(n),t.reject(n)})),t.promise}},{key:"resetPassword",value:function(){var e=this,t=new s.DeferredPromise;return new a.APIRequest({uri:g.passwordReset(this),method:"POST"}).then(function(n){e.logger.info("password reset for user"),t.resolve(n)},function(n){e.logger.error(n),t.reject(n)}),t.promise}},{key:"toString",value:function(){return"<IonicUser ['"+this.id+"']>"}},{key:"set",value:function(e,t){return delete this._unset[e],this.data.set(e,t)}},{key:"get",value:function(e,t){return this.data.get(e,t)}},{key:"unset",value:function(e){return this._unset[e]=!0,this.data.unset(e)}},{key:"id",set:function(e){this._id=e},get:function(){return this._id||null}}],[{key:"current",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return t?(h=t,v.store(),h):(h||(h=v.load()),h||(h=new e),h)}},{key:"fromContext",value:function(t){var n=new e;return n.id=t._id,n.data=new y(t.data.data),n.details=t.details||{},n._fresh=t._fresh,n._dirty=t._dirty,n}},{key:"self",value:function(){var t=new s.DeferredPromise,n=new e;return n._blockLoad?(n.logger.info("a load operation is already in progress for "+this+"."),t.reject(!1)):(n._blockLoad=!0,new a.APIRequest({uri:g.self(),method:"GET",json:!0}).then(function(r){n._blockLoad=!1,n.logger.info("loaded user"),n.id=r.payload.data.uuid,n.data=new y(r.payload.data.custom),n.details=r.payload.data.details,n._fresh=!1,e.current(n),t.resolve(n)},function(e){n._blockLoad=!1,n.logger.error(e),t.reject(e)})),t.promise}},{key:"load",value:function(t){var n=new s.DeferredPromise,r=new e;return r.id=t,r._blockLoad?(r.logger.info("a load operation is already in progress for "+this+"."),n.reject(!1)):(r._blockLoad=!0,new a.APIRequest({uri:g.get(r),method:"GET",json:!0}).then(function(e){r._blockLoad=!1,r.logger.info("loaded user"),r.data=new y(e.payload.data.custom),r.details=e.payload.data.details,r._fresh=!1,n.resolve(r)},function(e){r._blockLoad=!1,r.logger.error(e),n.reject(e)})),n.promise}}]),e}();n.User=_},{"../auth/auth":5,"./core":9,"./data-types":10,"./logger":13,"./promise":14,"./request":15,"./storage":16}],18:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../core/promise"),a=e("../core/logger"),s=e("../core/core"),u=e("../core/events"),c="IONIC_DEPLOY_MISSING_PLUGIN",l=5e3,f=6e4,h=function(){function e(){r(this,e);var t=this;this.logger=new a.Logger({prefix:"Ionic Deploy:"}),this._plugin=!1,this._isReady=!1,this._channelTag="production",this._emitter=new u.EventEmitter,this.logger.info("init"),s.IonicPlatform.onReady(function(){t.initialize(),t._isReady=!0,t._emitter.emit("ionic_deploy:ready")})}return i(e,[{key:"_getPlugin",value:function(){return this._plugin?this._plugin:"undefined"==typeof IonicDeploy?(this.logger.info("plugin is not installed or has not loaded. Have you run `ionic plugin add ionic-plugin-deploy` yet?"),!1):(this._plugin=IonicDeploy,IonicDeploy)}},{key:"initialize",value:function(){var e=this;this.onReady(function(){e._getPlugin()&&e._plugin.init(s.IonicPlatform.config.get("app_id"),s.IonicPlatform.config.getURL("platform-api"))})}},{key:"check",value:function(){var e=this,t=new o.DeferredPromise;return this.onReady(function(){e._getPlugin()?e._plugin.check(s.IonicPlatform.config.get("app_id"),e._channelTag,function(n){n&&"true"===n?(e.logger.info("an update is available"),t.resolve(!0)):(e.logger.info("no updates available"),t.resolve(!1))},function(n){e.logger.error("encountered an error while checking for updates"),t.reject(n)}):t.reject(c)}),t.promise}},{key:"download",value:function(){var e=this,t=new o.DeferredPromise;return this.onReady(function(){e._getPlugin()?e._plugin.download(s.IonicPlatform.config.get("app_id"),function(n){"true"!==n&&"false"!==n?t.notify(n):("true"===n&&e.logger.info("download complete"),t.resolve("true"===n))},function(e){t.reject(e)}):t.reject(c)}),t.promise}},{key:"extract",value:function(){var e=this,t=new o.DeferredPromise;return this.onReady(function(){e._getPlugin()?e._plugin.extract(s.IonicPlatform.config.get("app_id"),function(n){"done"!==n?t.notify(n):("true"===n&&e.logger.info("extraction complete"),t.resolve(n))},function(e){t.reject(e)}):t.reject(c)}),t.promise}},{key:"load",value:function(){var e=this;this.onReady(function(){e._getPlugin()&&e._plugin.redirect(s.IonicPlatform.config.get("app_id"))})}},{key:"watch",value:function(e){function t(){i.check().then(function(e){e&&n.notify(e)},function(e){i.logger.info("unable to check for updates: "+e)}),this._checkTimeout&&(this._checkTimeout=setTimeout(t.bind(i),r.interval))}var n=new o.DeferredPromise,r=e||{},i=this;return"undefined"==typeof r.initialDelay&&(r.initialDelay=l),"undefined"==typeof r.interval&&(r.interval=f),this._checkTimeout=setTimeout(t.bind(i),r.initialDelay),n.promise}},{key:"unwatch",value:function(){clearTimeout(this._checkTimeout),this._checkTimeout=null}},{key:"info",value:function(){var e=new o.DeferredPromise,t=this;return this.onReady(function(){t._getPlugin()?t._plugin.info(s.IonicPlatform.config.get("app_id"),function(t){e.resolve(t)},function(t){e.reject(t)}):e.reject(c)}),e.promise}},{key:"getVersions",value:function(){var e=new o.DeferredPromise,t=this;return this.onReady(function(){t._getPlugin()?t._plugin.getVersions(s.IonicPlatform.config.get("app_id"),function(t){e.resolve(t)},function(t){e.reject(t)}):e.reject(c)}),e.promise}},{key:"deleteVersion",value:function(e){var t=new o.DeferredPromise,n=this;return this.onReady(function(){n._getPlugin()?n._plugin.deleteVersion(s.IonicPlatform.config.get("app_id"),e,function(e){t.resolve(e)},function(e){t.reject(e)}):t.reject(c)}),t.promise}},{key:"getMetadata",value:function(e){var t=new o.DeferredPromise,n=this;return this.onReady(function(){n._getPlugin()?n._plugin.getMetadata(s.IonicPlatform.config.get("app_id"),e,function(e){t.resolve(e.metadata)},function(e){t.reject(e)}):t.reject(c)}),t.promise}},{key:"setChannel",value:function(e){this._channelTag=e}},{key:"update",value:function(e){var t=new o.DeferredPromise,n=this,r=!1;return"undefined"!=typeof e&&(r=e),this.onReady(function(){n._getPlugin()?n.check().then(function(e){if(e===!0){var i=0;n.download().then(function(e){e||t.reject("download error"),n.extract().then(function(e){e||t.reject("extraction error"),r?t.resolve(!0):(t.resolve(!0),n._plugin.redirect(s.IonicPlatform.config.get("app_id")))},function(e){t.reject(e)},function(e){var n=i+e/2;t.notify(n)})},function(e){t.reject(e)},function(e){i=e/2,t.notify(i)})}else t.resolve(!1)},function(e){t.reject(e)}):t.reject(c)}),t.promise}},{key:"onReady",value:function(e){var t=this;this._isReady?e(t):t._emitter.on("ionic_deploy:ready",function(){e(t)})}}]),e}();n.Deploy=h},{"../core/core":9,"../core/events":11,"../core/logger":13,"../core/promise":14}],19:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function i(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./deploy");i(n,r(o,i))},{"./deploy":18}],20:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function i(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./push-dev");i(n,r(o,i));var a=e("./push-message");i(n,r(a,i));var s=e("./push-token");i(n,r(s,i));var u=e("./push");i(n,r(u,i))},{"./push":24,"./push-dev":21,"./push-message":22,"./push-token":23}],21:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../core/request"),a=e("../core/core"),s=e("../core/logger"),u=e("./push-token"),c=function(){function e(){r(this,e),this.logger=new s.Logger({prefix:"Ionic Push (dev):"}),this._serviceHost=a.IonicPlatform.config.getURL("platform-api")+"/push",this._token=null,this._watch=null}return i(e,[{key:"getDevToken",value:function(){var e="DEV-xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});return this._token=e,this._token}},{key:"init",value:function(e,t){this._push=e,this._emitter=this._push._emitter;var n=this._token,r=this;n||(n=this.getDevToken());var i={method:"POST",uri:this._serviceHost+"/development",json:{token:n}};new o.APIRequest(i).then(function(){var e={registrationId:n};r.logger.info("registered with development push service: "+n),r._emitter.emit("ionic_push:token",e),"function"==typeof t&&t(new u.PushToken(r._token)),r.watch()},function(e){r.logger.error("error connecting development push service: "+e)})}},{key:"checkForNotifications",value:function(){if(!this._token)return!1;var e=this,t={method:"GET",uri:e._serviceHost+"/development?token="+e._token,json:!0};new o.APIRequest(t).then(function(t){if(t.payload.data.message){var n={message:t.payload.data.message,title:"DEVELOPMENT PUSH"};e.logger.warn("Ionic Push: Development Push received. Development pushes will not contain payload data."),e._emitter.emit("ionic_push:notification",n)}},function(t){e.logger.error("unable to check for development pushes: "+t)})}},{key:"watch",value:function(){this.logger.info("watching for new notifications");var e=this;this._watch||(this._watch=setInterval(function(){e.checkForNotifications()},5e3))}},{key:"halt",value:function(){this._watch&&clearInterval(this._watch)}}]),e}();n.PushDevService=c},{"../core/core":9,"../core/logger":13,"../core/request":15,"./push-token":23}],22:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.asleep=!1,this.closed=!1}return i(e,[{key:"wasAsleep",get:function(){return this.asleep}},{key:"wasClosed",get:function(){return this.closed}}]),e}();n.PushMessageAppStatus=o;var a=function(){function e(t){r(this,e),this._raw=t||{},this._raw.additionalData||(this._raw.additionalData={coldstart:!1,foreground:!0}),this._payload=null,this.app=null,this.text=null,this.title=null,this.count=null,this.sound=null,this.image=null}return i(e,[{key:"processRaw",value:function(){this.text=this._raw.message||null,this.title=this._raw.title||null,this.count=this._raw.count||null,this.sound=this._raw.sound||null,this.image=this._raw.image||null,this.app=new o,this._raw.additionalData.foreground||(this.app.asleep=!0),this._raw.additionalData.coldstart&&(this.app.closed=!0),this._raw.additionalData.payload&&(this._payload=this._raw.additionalData.payload)}},{key:"getRawVersion",value:function(){return this._raw}},{key:"toString",value:function(){return"<PushMessage ['"+this.title+"']>"}},{key:"payload",get:function(){return this._payload||{}}}],[{key:"fromPluginJSON",value:function(t){var n=new e(t);return n.processRaw(),n}}]),e}();n.PushMessage=a},{}],23:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._token=t||null}return i(e,[{key:"toString",value:function(){var e=this._token||"null";return"<PushToken ['"+e+"']>"}},{key:"token",set:function(e){this._token=e},get:function(){return this._token}}]),e}();n.PushToken=o},{}],24:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../core/app"),a=e("../core/core"),s=e("../core/logger"),u=e("../core/events"),c=e("../core/request"),l=e("../core/promise"),f=e("../core/user"),h=e("./push-token"),p=e("./push-message"),d=e("./push-dev"),g="DEFER_INIT",v=a.IonicPlatform.config.getURL("platform-api")+"/push",y={saveToken:function(){return v+"/tokens"},invalidateToken:function(){return v+"/tokens/invalidate"}},_=function(){function e(t){r(this,e),this.logger=new s.Logger({prefix:"Ionic Push:"});var n=new o.App(a.IonicPlatform.config.get("app_id"),a.IonicPlatform.config.get("api_key"));if(n.devPush=a.IonicPlatform.config.get("dev_push"),n.gcmKey=a.IonicPlatform.config.get("gcm_key"),!n.id||!n.apiKey)return void this.logger.error("no app_id or api_key found. (http://docs.ionic.io/docs/io-install)");if(a.IonicPlatform.isAndroidDevice()&&!n.devPush&&!n.gcmKey)return void this.logger.error("GCM project number not found (http://docs.ionic.io/docs/push-android-setup)");if(this.app=n,this.registerCallback=null,this.notificationCallback=null,this.errorCallback=null,this._token=null,this._notification=!1,this._debug=!1,this._isReady=!1,this._tokenReady=!1,this._blockRegistration=!1,this._blockSaveToken=!1,this._registered=!1,this._emitter=new u.EventEmitter,this._plugin=null,t!==g){var i=this;a.IonicPlatform.onReady(function(){i.init(t)})}}return i(e,[{key:"getStorageToken",value:function(){var e=a.IonicPlatform.getStorage(),t=e.retrieveObject("ionic_io_push_token");return t?new h.PushToken(t.token):null}},{key:"clearStorageToken",value:function(){var e=a.IonicPlatform.getStorage();e.deleteObject("ionic_io_push_token")}},{key:"init",value:function(e){if(this._getPushPlugin(),"undefined"==typeof e&&(e={}),"object"!=typeof e)return void this.logger.error("init() requires a valid config object.");var t=this;return e.pluginConfig||(e.pluginConfig={}),a.IonicPlatform.isAndroidDevice()&&(e.pluginConfig.android||(e.pluginConfig.android={}),e.pluginConfig.android.senderId||(e.pluginConfig.android.senderID=t.app.gcmKey)),e.onRegister&&this.setRegisterCallback(e.onRegister),e.onNotification&&this.setNotificationCallback(e.onNotification),e.onError&&this.setErrorCallback(e.onError),this._config=e,this._isReady=!0,this._emitter.emit("ionic_push:ready",{config:this._config}),this}},{key:"saveToken",value:function(e,t){var n=this,r=new l.DeferredPromise,i=t||{};e.token&&(e=e.token);var o={token:e,app_id:a.IonicPlatform.config.get("app_id")};if(!i.ignore_user){var s=f.User.current();s.isAuthenticated()&&(o.user_id=s.id)}return n._blockSaveToken?(n.logger.info("a token save operation is already in progress."),r.reject(!1)):new c.APIRequest({uri:y.saveToken(),method:"POST",json:o}).then(function(t){n._blockSaveToken=!1,n.logger.info("saved push token: "+e),o.user_id&&n.logger.info("added push token to user: "+o.user_id),r.resolve(t)},function(e){n._blockSaveToken=!1,n.logger.error(e),r.reject(e)}),r.promise}},{key:"register",value:function(e){this.logger.info("register");var t=this;return this._blockRegistration?(t.logger.info("another registration is already in progress."),!1):(this._blockRegistration=!0,void this.onReady(function(){if(t.app.devPush){var n=new d.PushDevService;t._debugCallbackRegistration(),t._callbackRegistration(),n.init(t,e),t._blockRegistration=!1,t._tokenReady=!0}else t._plugin=t._getPushPlugin().init(t._config.pluginConfig),t._plugin.on("registration",function(n){t._blockRegistration=!1,t.token=new h.PushToken(n.registrationId),t._tokenReady=!0,"function"==typeof e&&e(t._token)}),t._debugCallbackRegistration(),t._callbackRegistration();t._registered=!0}))}},{key:"unregister",value:function(){var e=this,t=new l.DeferredPromise,n=null;return a.IonicPlatform.isAndroidDevice()?n="android":a.IonicPlatform.isIOSDevice()&&(n="ios"),n||t.reject("Could not detect the platform, are you on a device?"),e._blockUnregister?(e.logger.info("an unregister operation is already in progress."),t.reject(!1)):(this._plugin&&this._plugin.unregister(function(){},function(){}),new c.APIRequest({uri:y.invalidateToken(),method:"POST",json:{platform:n,token:e.getStorageToken().token}}).then(function(n){e._blockUnregister=!1,e.logger.info("unregistered push token: "+e.getStorageToken().token),e.clearStorageToken(),t.resolve(n)},function(n){e._blockUnregister=!1,e.logger.error(n),t.reject(n)})),t.promise}},{key:"getPayload",value:function(e){return e.payload}},{key:"setRegisterCallback",value:function(e){return"function"!=typeof e?(this.logger.info("setRegisterCallback() requires a valid callback function"),!1):(this.registerCallback=e,!0)}},{key:"setNotificationCallback",value:function(e){return"function"!=typeof e?(this.logger.info("setNotificationCallback() requires a valid callback function"),!1):(this.notificationCallback=e,!0)}},{key:"setErrorCallback",value:function(e){return"function"!=typeof e?(this.logger.info("setErrorCallback() requires a valid callback function"),!1):(this.errorCallback=e,!0)}},{key:"_debugRegistrationCallback",value:function(){function e(e){t.token=new h.PushToken(e.registrationId),t.logger.info("(debug) device token registered: "+t._token)}var t=this;return e}},{key:"_debugNotificationCallback",value:function(){function e(e){t._processNotification(e);var n=p.PushMessage.fromPluginJSON(e);t.logger.info("(debug) notification received: "+n),!t.notificationCallback&&t.app.devPush&&alert(n.text)}var t=this;return e}},{key:"_debugErrorCallback",value:function(){function e(e){t.logger.error("(debug) unexpected error occured."),t.logger.error(e)}var t=this;return e}},{key:"_registerCallback",value:function(){function e(e){return t.token=new h.PushToken(e.registrationId),t.registerCallback?t.registerCallback(t._token):void 0}var t=this;return e}},{key:"_notificationCallback",value:function(){function e(e){t._processNotification(e);var n=p.PushMessage.fromPluginJSON(e);return t.notificationCallback?t.notificationCallback(n):void 0}var t=this;return e}},{key:"_errorCallback",value:function(){function e(e){return t.errorCallback?t.errorCallback(e):void 0}var t=this;return e}},{key:"_debugCallbackRegistration",value:function(){this._config.debug&&(this.app.devPush?this._registered||(this._emitter.on("ionic_push:token",this._debugRegistrationCallback()),this._emitter.on("ionic_push:notification",this._debugNotificationCallback()),this._emitter.on("ionic_push:error",this._debugErrorCallback())):(this._plugin.on("registration",this._debugRegistrationCallback()),this._plugin.on("notification",this._debugNotificationCallback()),this._plugin.on("error",this._debugErrorCallback())))}},{key:"_callbackRegistration",value:function(){this.app.devPush?this._registered||(this._emitter.on("ionic_push:token",this._registerCallback()),this._emitter.on("ionic_push:notification",this._notificationCallback()),this._emitter.on("ionic_push:error",this._errorCallback())):(this._plugin.on("registration",this._registerCallback()),this._plugin.on("notification",this._notificationCallback()),this._plugin.on("error",this._errorCallback()))}},{key:"_processNotification",value:function(e){this._notification=e,this._emitter.emit("ionic_push:processNotification",e)}},{key:"_getPushPlugin",value:function(){var e=this,t=null;try{t=window.PushNotification}catch(n){e.logger.info("something went wrong looking for the PushNotification plugin")}return e.app.devPush||t||!a.IonicPlatform.isIOSDevice()&&!a.IonicPlatform.isAndroidDevice()||e.logger.error("PushNotification plugin is required. Have you run `ionic plugin add phonegap-plugin-push` ?"),t}},{key:"getPushPlugin",value:function(){return this._plugin}},{key:"onReady",value:function(e){var t=this;this._isReady?e(t):t._emitter.on("ionic_push:ready",function(){e(t)})}},{key:"token",set:function(e){var t=a.IonicPlatform.getStorage();e instanceof h.PushToken&&t.storeObject("ionic_io_push_token",{token:e.token}),this._token=e}}]),e}();n.Push=_},{"../core/app":7,"../core/core":9,"../core/events":11,"../core/logger":13,"../core/promise":14,"../core/request":15,"../core/user":17,"./push-dev":21,"./push-message":22,"./push-token":23}],25:[function(e,t,n){"use strict";function r(e,t){var n=t({},e);return delete n["default"],n}function i(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(t,i);o&&o.configurable&&void 0===e[i]&&Object.defineProperty(e,i,o)}return e}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./util");i(n,r(o,i))},{"./util":26}],26:[function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];t=t[0]||{};for(var i=1;i<arguments.length;i++){var o=arguments[i];if(o)for(var a in o)o.hasOwnProperty(a)&&("object"==typeof o[a]?t[a]=r(t[a],o[a]):t[a]=o[a])}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.deepExtend=r},{}],27:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];n.apply(this,o)}else if(a(n)){for(r=arguments.length,o=new Array(r-1),u=1;r>u;u++)o[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,o)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned){var n;n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],28:[function(e,t,n){function r(){l=!1,s.length?c=s.concat(c):f=-1,c.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function a(){}var s,u=t.exports={},c=[],l=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new o(e,t)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],29:[function(e,t,n){function r(e){return e?i(e):void 0}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}"undefined"!=typeof t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],30:[function(e,t,n){(function(n,r){(function(){"use strict";function i(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){B=e}function u(e){J=e}function c(){return function(){n.nextTick(d)}}function l(){return function(){G(d)}}function f(){var e=0,t=new W(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function h(){var e=new MessageChannel;return e.port1.onmessage=d,function(){e.port2.postMessage(0)}}function p(){return function(){setTimeout(d,1)}}function d(){for(var e=0;K>e;e+=2){var t=te[e],n=te[e+1];t(n),te[e]=void 0,te[e+1]=void 0}K=0}function g(){try{var t=e,n=t("vertx");return G=n.runOnLoop||n.runOnContext,l()}catch(r){return p()}}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function _(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(t){return oe.error=t,oe}}function k(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function b(e,t,n){J(function(e){var r=!1,i=k(n,t,function(n){r||(r=!0,t!==n?j(e,n):T(e,n))},function(t){r||(r=!0,O(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,O(e,i))},e)}function w(e,t){t._state===re?T(e,t._result):t._state===ie?O(e,t._result):C(t,void 0,function(t){j(e,t)},function(t){O(e,t)})}function P(e,t){if(t.constructor===e.constructor)w(e,t);else{var n=m(t);n===oe?O(e,oe.error):void 0===n?T(e,t):o(n)?b(e,t,n):T(e,t)}}function j(e,t){e===t?O(e,y()):i(t)?P(e,t):T(e,t)}function I(e){e._onerror&&e._onerror(e._result),E(e)}function T(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&J(E,e))}function O(e,t){e._state===ne&&(e._state=ie,e._result=t,J(I,e))}function C(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+re]=n,i[o+ie]=r,0===o&&e._state&&J(E,e)}function E(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?D(n,r,i,o):i(o);e._subscribers.length=0}}function S(){this.error=null}function A(e,t){
try{return e(t)}catch(n){return ae.error=n,ae}}function D(e,t,n,r){var i,a,s,u,c=o(n);if(c){if(i=A(n,r),i===ae?(u=!0,a=i.error,i=null):s=!0,t===i)return void O(t,_())}else i=r,s=!0;t._state!==ne||(c&&s?j(t,i):u?O(t,a):e===re?T(t,i):e===ie&&O(t,i))}function R(e,t){try{t(function(t){j(e,t)},function(t){O(e,t)})}catch(n){O(e,n)}}function x(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(v),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?T(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&T(n.promise,n._result))):O(n.promise,n._validationError())}function L(e){return new se(this,e).promise}function q(e){function t(e){j(i,e)}function n(e){O(i,e)}var r=this,i=new r(v);if(!X(e))return O(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===ne&&o>a;a++)C(r.resolve(e[a]),void 0,t,n);return i}function N(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(v);return j(n,e),n}function M(e){var t=this,n=new t(v);return O(n,e),n}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this._id=he++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==e&&(o(e)||U(),this instanceof z||$(),R(this,e))}function H(){var e;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=pe)}var F;F=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var G,B,V,X=F,K=0,J=({}.toString,function(e,t){te[K]=e,te[K+1]=t,K+=2,2===K&&(B?B(d):V())}),Y="undefined"!=typeof window?window:void 0,Q=Y||{},W=Q.MutationObserver||Q.WebKitMutationObserver,Z="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),ee="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);V=Z?c():W?f():ee?h():void 0===Y&&"function"==typeof e?g():p();var ne=void 0,re=1,ie=2,oe=new S,ae=new S;x.prototype._validateInput=function(e){return X(e)},x.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},x.prototype._init=function(){this._result=new Array(this.length)};var se=x;x.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,i=0;n._state===ne&&t>i;i++)e._eachEntry(r[i],i)},x.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;a(e)?e.constructor===r&&e._state!==ne?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},x.prototype._settledAt=function(e,t,n){var r=this,i=r.promise;i._state===ne&&(r._remaining--,e===ie?O(i,n):r._result[t]=n),0===r._remaining&&T(i,r._result)},x.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){n._settledAt(re,t,e)},function(e){n._settledAt(ie,t,e)})};var ue=L,ce=q,le=N,fe=M,he=0,pe=z;z.all=ue,z.race=ce,z.resolve=le,z.reject=fe,z._setScheduler=s,z._setAsap=u,z._asap=J,z.prototype={constructor:z,then:function(e,t){var n=this,r=n._state;if(r===re&&!e||r===ie&&!t)return this;var i=new this.constructor(v),o=n._result;if(r){var a=arguments[r-1];J(function(){D(r,i,a,o)})}else C(n,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var de=H,ge={Promise:pe,polyfill:de};"function"==typeof define&&define.amd?define(function(){return ge}):"undefined"!=typeof t&&t.exports?t.exports=ge:"undefined"!=typeof this&&(this.ES6Promise=ge),de()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:28}],31:[function(e,t,n){t.exports=function(e,t,n){for(var r=0,i=e.length,o=3==arguments.length?n:e[r++];i>r;)o=t.call(null,o,e[r],++r,e);return o}},{}],32:[function(e,t,n){function r(){}function i(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(e){if(!m(e))return e;var t=[];for(var n in e)null!=e[n]&&a(t,n,e[n]);return t.join("&")}function a(e,t,n){return Array.isArray(n)?n.forEach(function(n){a(e,t,n)}):void e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}function s(e){for(var t,n,r={},i=e.split("&"),o=0,a=i.length;a>o;++o)n=i[o],t=n.split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function u(e){var t,n,r,i,o=e.split(/\r?\n/),a={};o.pop();for(var s=0,u=o.length;u>s;++s)n=o[s],t=n.indexOf(":"),r=n.slice(0,t).toLowerCase(),i=b(n.slice(t+1)),a[r]=i;return a}function c(e){return/[\/+]json\b/.test(e)}function l(e){return e.split(/ *; */).shift()}function f(e){return y(e.split(/ *; */),function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})}function h(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=u(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function p(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new h(n)}catch(r){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=r,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}if(n.emit("response",t),e)return n.callback(e,t);if(t.status>=200&&t.status<300)return n.callback(e,t);var i=new Error(t.statusText||"Unsuccessful HTTP response");i.original=e,i.response=t,i.status=t.status,n.callback(i,t)})}function d(e,t){var n=k("DELETE",e);return t&&n.end(t),n}var g,v=e("emitter"),y=e("reduce"),_=e("./request-base"),m=e("./is-object");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var k=t.exports=e("./request").bind(null,p);k.getXHR=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var b="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};k.serializeObject=o,k.parseString=s,k.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},k.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},k.parse={"application/x-www-form-urlencoded":s,"application/json":JSON.parse},h.prototype.get=function(e){return this.header[e.toLowerCase()]},h.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=l(t);var n=f(t);for(var r in n)this[r]=n[r]},h.prototype.parseBody=function(e){var t=k.parse[this.type];return!t&&c(this.type)&&(t=k.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},h.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=4==t||5==t?this.toError():!1,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},h.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},k.Response=h,v(p.prototype);for(var w in _)p.prototype[w]=_[w];p.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},p.prototype.type=function(e){return this.set("Content-Type",k.types[e]||e),this},p.prototype.responseType=function(e){return this._responseType=e,this},p.prototype.accept=function(e){return this.set("Accept",k.types[e]||e),this},p.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);break;case"auto":this.username=e,this.password=t}return this},p.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},p.prototype.attach=function(e,t,n){return this._getFormData().append(e,t,n||t.name),this},p.prototype._getFormData=function(){return this._formData||(this._formData=new g.FormData),this._formData},p.prototype.send=function(e){var t=m(e),n=this._header["content-type"];if(t&&m(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||i(e)?this:(n||this.type("json"),this)},h.prototype.parse=function(e){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.serialize(e),this},h.prototype.serialize=function(e){return this._parser=e,this},p.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},p.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},p.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(e){var t=this,n=this.xhr=k.getXHR(),o=this._query.join("&"),a=this._timeout,s=this._formData||this._data;this._callback=e||r,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(r){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var u=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=u);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=u)}catch(l){}if(a&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},a)),o&&(o=k.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof s&&!i(s)){var f=this._header["content-type"],h=this._parser||k.serialize[f?f.split(";")[0]:""];!h&&c(f)&&(h=k.serialize["application/json"]),h&&(s=h(s))}for(var p in this.header)null!=this.header[p]&&n.setRequestHeader(p,this.header[p]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof s?s:null),this},k.Request=p,k.get=function(e,t,n){var r=k("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},k.head=function(e,t,n){var r=k("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},k.del=d,k["delete"]=d,k.patch=function(e,t,n){var r=k("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},k.post=function(e,t,n){var r=k("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},k.put=function(e,t,n){var r=k("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},{"./is-object":33,"./request":35,"./request-base":34,emitter:29,reduce:31}],33:[function(e,t,n){function r(e){return null!=e&&"object"==typeof e}t.exports=r},{}],34:[function(e,t,n){var r=e("./is-object");n.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},n.parse=function(e){return this._parser=e,this},n.timeout=function(e){return this._timeout=e,this},n.then=function(e,t){return this.end(function(n,r){n?t(n):e(r)})},n.use=function(e){return e(this),this},n.get=function(e){return this._header[e.toLowerCase()]},n.getHeader=n.get,n.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.field=function(e,t){return this._getFormData().append(e,t),this}},{"./is-object":33}],35:[function(e,t,n){function r(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}t.exports=r},{}],36:[function(e,t,n){"use strict";if("object"==typeof angular&&angular.module){var r=function(e){return["$ionicAnalytics","$ionicGesture",function(t,n){for(var r=["drag","dragstart","dragend","dragleft","dragright","dragup","dragdown","swipe","swipeleft","swiperight","swipeup","swipedown","tap","doubletap","hold","transform","pinch","pinchin","pinchout","rotate"],i=!1,o=0;o<r.length;o++)r[o]===e.toLowerCase()&&(i=!0);return{restrict:"A",link:function(r,o,a){function s(e){var n=r.$eval(a.ionTrackData)||{};c?t.track(c,n):t.trackClick(e.pageX,e.pageY,e.target,{data:n})}var u=e[0].toUpperCase()+e.slice(1),c=a["ionTrack"+u];if(i){var l=n.on(e,s,o);r.$on("$destroy",function(){n.off(l,e,s)})}else o.on(e,s),r.$on("$destroy",function(){o.off(e,s)})}}}]},i=null;angular.module("ionic.service.analytics",["ionic"]).value("IONIC_ANALYTICS_VERSION",Ionic.Analytics.version).factory("$ionicAnalytics",[function(){return i||(i=new Ionic.Analytics("DEFER_REGISTER")),i}]).factory("domSerializer",[function(){return new Ionic.AnalyticSerializers.DOMSerializer}]).run(["$ionicAnalytics","$state",function(e,t){e.setGlobalProperties(function(e,n){n._ui||(n._ui={}),n._ui.active_state=t.current.name})}]),angular.module("ionic.service.analytics").provider("$ionicAutoTrack",[function(){var e={},t=!1;this.disableTracking=function(n){n?e[n]=!0:t=!0},this.$get=[function(){return{isEnabled:function(n){return!t&&!e[n]}}}]}]).run(["$ionicAutoTrack","$ionicAnalytics",function(e,t){e.isEnabled("Load")&&t.track("Load")}]).run(["$ionicAutoTrack","$document","$ionicAnalytics","domSerializer",function(e,t,n,r){e.isEnabled("Tap")&&t.on("click",function(e){var t=e.target.getBoundingClientRect(),i=t.right-t.left,o=t.bottom-t.top,a=(e.pageX-t.left)/i,s=(e.pageY-t.top)/o,u={coordinates:{x:e.pageX,y:e.pageY},target:r.elementSelector(e.target),target_identifier:r.elementName(e.target)};isFinite(a)&&isFinite(s)&&(u.coordinates.x_norm=a,u.coordinates.y_norm=s),n.track("Tap",{_ui:u})})}]).run(["$ionicAutoTrack","$ionicAnalytics","$rootScope",function(e,t,n){e.isEnabled("State Change")&&n.$on("$stateChangeSuccess",function(e,n,r,i,o){t.track("State Change",{from:i.name,to:n.name})})}]).directive("ionTrackClick",r("click")).directive("ionTrackTap",r("tap")).directive("ionTrackDoubletap",r("doubletap")).directive("ionTrackHold",r("hold")).directive("ionTrackRelease",r("release")).directive("ionTrackDrag",r("drag")).directive("ionTrackDragLeft",r("dragleft")).directive("ionTrackDragRight",r("dragright")).directive("ionTrackDragUp",r("dragup")).directive("ionTrackDragDown",r("dragdown")).directive("ionTrackSwipeLeft",r("swipeleft")).directive("ionTrackSwipeRight",r("swiperight")).directive("ionTrackSwipeUp",r("swipeup")).directive("ionTrackSwipeDown",r("swipedown")).directive("ionTrackTransform",r("hold")).directive("ionTrackPinch",r("pinch")).directive("ionTrackPinchIn",r("pinchin")).directive("ionTrackPinchOut",r("pinchout")).directive("ionTrackRotate",r("rotate"))}},{}],37:[function(e,t,n){"use strict";if("object"==typeof angular&&angular.module){var r=null;angular.module("ionic.service.auth",[]).factory("$ionicAuth",[function(){return r||(r=Ionic.Auth),r}])}},{}],38:[function(e,t,n){"use strict";"object"==typeof angular&&angular.module&&angular.module("ionic.service.core",[]).provider("persistentStorage",function(){return{$get:[function(){var e=Ionic.getService("Storage");return e||(e=new Ionic.IO.Storage,Ionic.addService("Storage",e,!0)),e}]}}).factory("$ionicCoreSettings",[function(){return Ionic.IO.Config}]).factory("$ionicUser",[function(){return Ionic.User}]).run([function(){Ionic.io()}])},{}],39:[function(e,t,n){"use strict";if("object"==typeof angular&&angular.module){var r=null;angular.module("ionic.service.deploy",[]).factory("$ionicDeploy",[function(){return r||(r=new Ionic.Deploy),r}])}},{}],40:[function(e,t,n){"use strict";var r=e("./../dist/es6/core/app"),i=e("./../dist/es6/core/core"),o=e("./../dist/es6/core/events"),a=e("./../dist/es6/core/logger"),s=e("./../dist/es6/core/promise"),u=e("./../dist/es6/core/request"),c=e("./../dist/es6/core/config"),l=e("./../dist/es6/core/storage"),f=e("./../dist/es6/core/user"),h=e("./../dist/es6/core/data-types"),p=e("./../dist/es6/analytics/analytics"),d=e("./../dist/es6/analytics/storage"),g=e("./../dist/es6/analytics/serializers"),v=e("./../dist/es6/auth/auth"),y=e("./../dist/es6/deploy/deploy"),_=e("./../dist/es6/push/push"),m=e("./../dist/es6/push/push-token"),k=e("./../dist/es6/push/push-message");window.Ionic=window.Ionic||{},Ionic.Core=i.IonicPlatform,Ionic.User=f.User,Ionic.Analytics=p.Analytics,Ionic.Auth=v.Auth,Ionic.Deploy=y.Deploy,Ionic.Push=_.Push,Ionic.PushToken=m.PushToken,Ionic.PushMessage=k.PushMessage,Ionic.DataType=h.DataType,Ionic.DataTypes=h.DataType.getMapping(),Ionic.IO={},Ionic.IO.App=r.App,Ionic.IO.EventEmitter=o.EventEmitter,Ionic.IO.Logger=a.Logger,Ionic.IO.Promise=s.Promise,Ionic.IO.DeferredPromise=s.DeferredPromise,Ionic.IO.Request=u.Request,Ionic.IO.Response=u.Response,Ionic.IO.APIRequest=u.APIRequest,Ionic.IO.APIResponse=u.APIResponse,Ionic.IO.Storage=l.Storage,Ionic.IO.Config=c.Config,Ionic.AnalyticStorage={},Ionic.AnalyticStorage.BucketStorage=d.BucketStorage,Ionic.AnalyticSerializers={},Ionic.AnalyticSerializers.DOMSerializer=g.DOMSerializer;var b={};Ionic.io=function(){return Ionic.Core},Ionic.getService=function(e){return"undefined"!=typeof b[e]&&b[e]?b[e]:!1},Ionic.addService=function(e,t,n){t&&"undefined"==typeof b[e]?b[e]=t:t&&n&&(b[e]=t)},Ionic.removeService=function(e){"undefined"!=typeof b[e]&&delete b[e]}},{"./../dist/es6/analytics/analytics":1,"./../dist/es6/analytics/serializers":3,"./../dist/es6/analytics/storage":4,"./../dist/es6/auth/auth":5,"./../dist/es6/core/app":7,"./../dist/es6/core/config":8,"./../dist/es6/core/core":9,"./../dist/es6/core/data-types":10,"./../dist/es6/core/events":11,"./../dist/es6/core/logger":13,"./../dist/es6/core/promise":14,"./../dist/es6/core/request":15,"./../dist/es6/core/storage":16,"./../dist/es6/core/user":17,"./../dist/es6/deploy/deploy":18,"./../dist/es6/push/push":24,"./../dist/es6/push/push-message":22,"./../dist/es6/push/push-token":23}],41:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();if("object"==typeof angular&&angular.module){var o=null;angular.module("ionic.service.push",[]).factory("$ionicPushAction",["$state",function(e){var t=function(){function t(){r(this,t)}return i(t,[{key:"notificationNavigation",value:function(t){var n=t.payload.$state||!1,r=t.payload.$stateParams||{};n&&e.go(n,r)}}]),t}();return new t}]).factory("$ionicPush",[function(){return o||(o=new Ionic.Push("DEFER_INIT")),o}]).run(["$ionicPush","$ionicPushAction",function(e,t){e._emitter.on("ionic_push:processNotification",function(e){e=Ionic.PushMessage.fromPluginJSON(e),e&&e.app&&(e.app.asleep===!0||e.app.closed===!0)&&t.notificationNavigation(e)})}])}},{}]},{},[14,15,11,13,16,8,10,9,17,7,12,5,6,23,22,21,24,20,18,19,4,3,1,2,26,25,40,38,36,37,41,39]);